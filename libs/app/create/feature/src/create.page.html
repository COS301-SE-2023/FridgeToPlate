<div class="lg:flex justify-center pt-8 bg-background-light h-full overflow-y-scroll [&>*]:max-w-screen-sm lg:[&>*]:max-w-screen-md">

  
  <navigation-bar></navigation-bar>
  <div class="flex lg:hidden justify-center m-auto">
    <img (click)="fileInput.click()"
    [src]="imageUrl"
    class="max-h-96 rounded-2xl mb-10 aspect-square cursor-pointer"
    alt="Recipe Image"
    />

  <input style="display: none" type="file" (change)="onFileChanged($event)" #fileInput>

  </div>

  <form [formGroup]="recipeForm" (ngSubmit)="createRecipe()" class="[&>*]:mb-8 justify-center lg:my-auto sm:mx-auto lg:mx-0 overflow-y-visible">
  
    <div>
      <label for="name" class="block text-gray-700 font-bold mb-2">Recipe Name<span class="text-orange-500">*</span></label>
      <input
        type="text"
        id="name"
        formControlName="name"
        placeholder="Name"
        class="w-full bg-gray-200 border border-gray-400 p-2 rounded-2xl"
        required
      >
    </div>
  
    <div>
      <label for="description" class="block text-gray-700 font-bold mb-2">Recipe Description<span class="text-red-500">*</span></label>
      <textarea
        id="description"
        placeholder="Description"
        formControlName="description"
        class="w-full bg-gray-200 border border-gray-400 p-2 rounded-2xl"
        required
      ></textarea>
    </div>

    <div >
      <label class="block text-gray-700 font-bold mb-2">Meal<span class="text-red-500">*</span></label>
      <div class="flex justify-between mb-2">
        <button
          type="button"
          [ngClass]="getMealPlan('breakfast')"
          value="Breakfast"
          (click)="toggleMeal('breakfast')"
          class="bg-gray-200 text-gray-700 py-2 px-4 rounded-md mr-2"
        >
        BreakFast
        </button>
        <button
          type="button"
          [ngClass]="getMealPlan('lunch')"
          (click)="toggleMeal('lunch')"
          value="Lunch"
          class="bg-gray-200 text-gray-700 py-2 px-4 rounded-md mr-2"
        >
        Lunch
        </button>
        <button
          type="button"
          [ngClass]="getMealPlan('dinner')"
          (click)="toggleMeal('dinner')"
          value="Dinner"
          class="bg-gray-200 text-gray-700 py-2 px-4 rounded-md mr-2"
        >
        Dinner
        </button>
        <button
          type="button"
          [ngClass]="getMealPlan('snack')"
          (click)="toggleMeal('snack')"
          value="Snack"
          class="bg-gray-200 text-gray-700 py-2 px-4 rounded-md mr-2"
          >
          Snack
        </button>
      </div>
    </div>
  
    <div>
      <div class="flex justify-between">
        <label for="ingredients" class="block text-gray-700 font-bold mr-2">Ingredients<span class="text-red-500">*</span></label>
        <button type="button" (click)="addIngredient()" class="text-white bg-primary hover:bg-primary-highlight font-medium rounded-sm text-sm px-10 py-1 text-center inline-flex items-center mb-3">Add</button>
      </div>
      <div formArrayName="ingredients">
        <div *ngFor="let ingredientControl of ingredientControls; let i = index" class=" flex mb-2">
          <div class="w-3/5">
            <input
              type="text"
              placeholder="Ingredient"
              id="ingredient-{{i}}"
              [formControlName]="i"
              class="w-full bg-gray-200 border border-gray-400 p-2 rounded-2xl mr-2"
              required
            >
          </div>

          <div>
            <button type="button" (click)="removeIngredient(i)" class="text-black text-3xl mx-4 font-medium rounded-lg text-center inline-flex items-center">
              <ion-icon name="trash-outline"></ion-icon>
            </button>
          </div>


        </div>
      </div>

    </div>
      
  
    <div>
      <div class="flex justify-between">
        <label for="instructions" class="block text-gray-700 font-bold mr-2">Instructions<span class="text-red-500">*</span></label>
        <button type="button" (click)="addInstruction()" class="text-white bg-primary hover:bg-primary-highlight font-medium rounded-sm text-sm px-10 py-1 text-center inline-flex items-center mb-3">Add</button>
      </div>
      <div formArrayName="instructions">
        <div *ngFor="let instructionControl of instructionControls; let i = index" class="mb-2">
          <div class="flex items-center">
            <input
              type="text"
              placeholder="Add Instruction"
              id="instruction-{{i}}"
              [formControlName]="i"
              class="w-full bg-gray-200 border border-gray-400 p-2 rounded-2xl"
              required>
            <button type="button" (click)="removeInstruction(i)" class="text-black text-3xl mx-4 font-medium rounded-lg text-center inline-flex items-center"><ion-icon name="trash-outline"></ion-icon></button>
          </div>
        </div>
      </div>
    </div>
  
    <div>
      <label for="servings" class="block text-gray-700 font-bold mb-2">Number of Servings<span class="text-red-500">*</span></label>
      <input
        type="number"
        id="servings"
        placeholder="e.g 10"
        formControlName="servings"
        class="w-full bg-gray-200 border border-gray-400 p-2 rounded-2xl"
      >
    </div>
  
    <div>
      <label for="preparation-time" class="block text-gray-700 font-bold mb-2">Preparation Time (in minutes)<span class="text-red-500">*</span></label>
      <input
        type="number"
        id="preparation-time"
        placeholder="e.g 10"
        formControlName="preparationTime"
        class="w-full bg-gray-200 border border-gray-400 p-2 rounded-2xl"
        required
      >
    </div>

    <div>
      <label for="tag" class="block text-gray-700 font-bold mb-2">Tag<span class="text-red-500">*</span></label>

      <div class="flex justify-between"> 
        <div class="flex">
          <input
            id="tag"
            type="text"
            placeholder="e.g. Asia, Vegan"
            formControlName="tag"
            class="w-full bg-gray-200 border border-gray-400 p-2 rounded-2xl mr-2"
            required
          >
        </div>
        <div>
          <button type="button" (click)="addTag()" class="text-white bg-primary hover:bg-primary-highlight font-medium rounded-sm text-sm px-10 py-1 text-center inline-flex items-center mb-3">
            Add Tag
          </button>
        </div>
      </div>
      <div class="py-2">
        <ul class="flex">
          <li *ngFor="let tag of tags; let i = index"
          class="bg-gray-200 text-gray-700 py-2 px-4 rounded-md mr-2"
          (click)="deleteTag(i)">
          {{ tag }}
        </li>
        </ul>
      </div>
      
    </div>
   
    <div class="flex justify-center">
      <button type="submit" class="bg-primary text-white hover:bg-primary-highlight font-medium py-2 px-10 rounded-sm w-full mx-5">Create Recipe</button>
    </div>
  </form>

  <div class="relative hidden lg:block my-auto pl-20">
    <img (click)="fileInput.click()"
    [src]="imageUrl"
    class="max-h-96 rounded-2xl mb-10 aspect-square cursor-pointer"
    alt="Recipe Image"
    />

  <input style="display: none" type="file" (change)="onFileChanged($event)" #fileInput>
  </div>
</div>